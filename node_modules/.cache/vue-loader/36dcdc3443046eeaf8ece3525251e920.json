{"remainingRequest":"/Users/viktorglaes/Documents/vue/online-shop/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/viktorglaes/Documents/vue/online-shop/client/src/views/Checkout.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/viktorglaes/Documents/vue/online-shop/client/src/views/Checkout.vue","mtime":1605825600123},{"path":"/Users/viktorglaes/Documents/vue/online-shop/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/viktorglaes/Documents/vue/online-shop/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/viktorglaes/Documents/vue/online-shop/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/viktorglaes/Documents/vue/online-shop/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ2hlY2tvdXQiLAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsidXNlciIsICJpc0xvZ2dlZEluIiwgImNhcnRJdGVtcyJdKSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb2x1bW5zOiBbCiAgICAgICAgewogICAgICAgICAgZmllbGQ6ICJ0aXRsZSIsCiAgICAgICAgICBsYWJlbDogIlByb2R1Y3QiLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgZmllbGQ6ICJxdWFudGl0eSIsCiAgICAgICAgICBsYWJlbDogIlF1YW50aXR5IiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGZpZWxkOiAicHJpY2UiLAogICAgICAgICAgbGFiZWw6ICJQcmljZSIsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgbmFtZTogbnVsbCwKICAgICAgZW1haWw6IG51bGwsCiAgICAgIGFkZHJlc3MxOiBudWxsLAogICAgICBhZGRyZXNzMjogbnVsbCwKICAgICAgcG9zdGFsQ29kZTogbnVsbCwKICAgICAgY291bnRyeTogbnVsbCwKICAgICAgc3RhdGU6IG51bGwsCiAgICAgIHNlY29uZEVtYWlsOiBudWxsLAogICAgICBjcmVkaXRDYXJkOiBudWxsLAogICAgICB0b3RhbENhcnRQcmljZTogbnVsbCwKICAgIH07CiAgfSwKICBtb3VudGVkKCkgewogICAgbGV0IHN1bVRvdGFsID0gMDsKICAgIHRoaXMuY2FydEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgc3VtVG90YWwgKz0gaXRlbS50b3RhbFByaWNlOwogICAgfSk7CiAgICB0aGlzLnRvdGFsQ2FydFByaWNlID0gTWF0aC5yb3VuZCgoc3VtVG90YWwgKyBOdW1iZXIuRVBTSUxPTikgKiAxMDApIC8gMTAwOwogIH0sCiAgbWV0aG9kczogewogICAgLi4ubWFwQWN0aW9ucyhbImdldFByb2ZpbGUiLCAib3JkZXJQcm9kdWN0cyIsICJzZXRDYXJ0SXRlbXMiXSksCiAgICBzdWJtaXRPcmRlcigpIHsKICAgICAgbGV0IG9yZGVyID0gewogICAgICAgIG5hbWU6IHRoaXMubmFtZSA/IHRoaXMubmFtZSA6IHRoaXMudXNlci5uYW1lLAogICAgICAgIGVtYWlsOiB0aGlzLmVtYWlsID8gdGhpcy5lbWFpbCA6IHRoaXMudXNlci5lbWFpbCwKICAgICAgICBhZGRyZXNzMTogdGhpcy5hZGRyZXNzMSA/IHRoaXMuYWRkcmVzczEgOiB0aGlzLnVzZXIuYWRkcmVzc0xpbmUxLAogICAgICAgIGFkZHJlc3MyOiB0aGlzLmFkZHJlc3MyID8gdGhpcy5hZGRyZXNzMiA6IHRoaXMudXNlci5hZGRyZXNzTGluZTIsCiAgICAgICAgcG9zdGFsQ29kZTogdGhpcy5wb3N0YWxDb2RlID8gdGhpcy5wb3N0YWxDb2RlIDogdGhpcy51c2VyLnBvc3RhbENvZGUsCiAgICAgICAgY291bnRyeTogdGhpcy5jb3VudHJ5ID8gdGhpcy5jb3VudHJ5IDogdGhpcy51c2VyLmNvdW50cnksCiAgICAgICAgc3RhdGU6IHRoaXMuc3RhdGUgPyB0aGlzLnN0YXRlIDogdGhpcy51c2VyLnN0YXRlLAogICAgICAgIHNlY29uZEVtYWlsOiB0aGlzLnNlY29uZEVtYWlsLAogICAgICAgIGNyZWRpdENhcmQ6IHRoaXMuY3JlZGl0Q2FyZCwKICAgICAgICBpdGVtczogdGhpcy5jYXJ0SXRlbXMsCiAgICAgICAgdXNlcklkOiB0aGlzLnVzZXIuX2lkLAogICAgICB9OwoKICAgICAgaWYgKAogICAgICAgICFvcmRlci5uYW1lIHx8CiAgICAgICAgIW9yZGVyLmVtYWlsIHx8CiAgICAgICAgIW9yZGVyLmFkZHJlc3MxIHx8CiAgICAgICAgIW9yZGVyLnBvc3RhbENvZGUgfHwKICAgICAgICAhb3JkZXIuY291bnRyeSB8fAogICAgICAgICFvcmRlci5zdGF0ZSB8fAogICAgICAgICFvcmRlci5jcmVkaXRDYXJkIHx8CiAgICAgICAgIW9yZGVyLml0ZW1zCiAgICAgICkgewogICAgICAgIHRoaXMuZGFuZ2VyKCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnNvbGUubG9nKG9yZGVyKTsKICAgICAgdGhpcy5vcmRlclByb2R1Y3RzKG9yZGVyKS50aGVuKChyZXMpID0+IHsKICAgICAgICBjb25zb2xlLmxvZygpOwogICAgICAgIGlmIChyZXMuZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL3Bvc3Qtb3JkZXIiKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLnNldENhcnRJdGVtcyhbXSk7CiAgICAgIGxldCBxdWFudGl0eUljb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaXRlbS1xdWFudGl0eSIpOwogICAgICBxdWFudGl0eUljb24uc3R5bGUgPQogICAgICAgICJ0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC42cyBlYXNlOyB0cmFuc2Zvcm06IHNjYWxlKDEuMSk7IGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50IjsKICAgIH0sCiAgICBkYW5nZXIoKSB7CiAgICAgIHRoaXMuJGJ1ZWZ5LnRvYXN0Lm9wZW4oewogICAgICAgIGR1cmF0aW9uOiA1MDAwLAogICAgICAgIG1lc3NhZ2U6IGBQbGVhc2UgZmlsbCBvdXQgYWxsIHRoZSByZXF1aXJlZCBmaWVsZHMuYCwKICAgICAgICB0eXBlOiAiaXMtZGFuZ2VyIiwKICAgICAgfSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["Checkout.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8IA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Checkout.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"checkout\">\n    <h1 style=\"font-size: 36px; font-weight: 600\">Checkout</h1>\n    <div class=\"checkout-form\">\n      <div class=\"profile\">\n        <div v-if=\"isLoggedIn\">\n          <div class=\"fields\">\n            <div class=\"field\">{{ user.name }}</div>\n            <div class=\"field\">{{ user.email }}</div>\n          </div>\n        </div>\n        <div v-else>\n          <b-field>\n            <b-input\n              placeholder=\"Name\"\n              v-model=\"name\"\n              type=\"text\"\n              icon=\"user\"\n              icon-right=\"close-circle\"\n            >\n            </b-input>\n          </b-field>\n          <b-field>\n            <b-input\n              placeholder=\"Email\"\n              type=\"email\"\n              v-model=\"email\"\n              icon=\"envelope-square\"\n              icon-right=\"close-circle\"\n            >\n            </b-input>\n          </b-field>\n        </div>\n      </div>\n      <div class=\"address\">\n        <div v-if=\"isLoggedIn\">\n          <div class=\"fields\">\n            <div class=\"field\">{{ user.addressLine1 }}</div>\n            <div class=\"field\">{{ user.addressLine2 }}</div>\n            <div class=\"field\">{{ user.postalCode }}</div>\n            <div class=\"field\">{{ user.state }}</div>\n            <div class=\"field\">{{ user.country }}</div>\n          </div>\n        </div>\n        <div v-else>\n          <b-field>\n            <b-input\n              placeholder=\"Address Line 1\"\n              icon=\"address-card\"\n              v-model=\"address1\"\n            >\n            </b-input>\n          </b-field>\n          <b-field>\n            <b-input\n              placeholder=\"Address Line 2\"\n              icon=\"address-card\"\n              v-model=\"address2\"\n            >\n            </b-input>\n          </b-field>\n          <b-field>\n            <b-input\n              placeholder=\"Postal Code\"\n              icon=\"map-marker\"\n              v-model=\"postalCode\"\n            >\n            </b-input>\n          </b-field>\n          <b-field>\n            <b-input\n              placeholder=\"State/Province\"\n              type=\"text\"\n              icon=\"flag-usa\"\n              icon-right=\"close-circle\"\n              v-model=\"state\"\n            >\n            </b-input>\n          </b-field>\n          <b-field>\n            <b-input\n              placeholder=\"Country\"\n              type=\"text\"\n              icon=\"flag\"\n              icon-right=\"close-circle\"\n              v-model=\"country\"\n            >\n            </b-input>\n          </b-field>\n        </div>\n      </div>\n      <div class=\"payment\">\n        <b-field>\n          <b-input\n            placeholder=\"Second email\"\n            type=\"email\"\n            icon=\"envelope-square\"\n            icon-right=\"close-circle\"\n            v-model=\"secondEmail\"\n          >\n          </b-input>\n        </b-field>\n        <b-field>\n          <b-input\n            placeholder=\"Credit card\"\n            icon=\"credit-card\"\n            v-model=\"creditCard\"\n          >\n          </b-input>\n        </b-field>\n      </div>\n    </div>\n\n    <div class=\"item-table\">\n      <b-table :data=\"cartItems\" :columns=\"columns\"></b-table>\n    </div>\n    <div class=\"level-right\">\n      <p style=\"margin-top: 20px; font-size: 24px; font-weight: 600\">\n        Total: ${{ totalCartPrice }}\n      </p>\n    </div>\n    <div class=\"level\">\n      <div class=\"level-left checkout\">\n        <router-link to=\"/cart\">\n          <div class=\"button\">\n            <b-icon icon=\"chevron-circle-left\"></b-icon>\n            <span>Back to cart</span>\n          </div>\n        </router-link>\n        <!-- <b-button type=\"is-primary\">Back to products</b-button> -->\n      </div>\n      <div class=\"level-right checkout\" v-if=\"cartItems.length > 0\">\n        <b-button type=\"is-primary\" @click=\"submitOrder\">Submit Order</b-button>\n      </div>\n      <div v-else>\n        <b-button type=\"is-primary\" disabled>Submit Order</b-button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from \"vuex\";\n\nexport default {\n  name: \"Checkout\",\n  computed: {\n    ...mapGetters([\"user\", \"isLoggedIn\", \"cartItems\"]),\n  },\n  data() {\n    return {\n      columns: [\n        {\n          field: \"title\",\n          label: \"Product\",\n        },\n        {\n          field: \"quantity\",\n          label: \"Quantity\",\n        },\n        {\n          field: \"price\",\n          label: \"Price\",\n        },\n      ],\n      name: null,\n      email: null,\n      address1: null,\n      address2: null,\n      postalCode: null,\n      country: null,\n      state: null,\n      secondEmail: null,\n      creditCard: null,\n      totalCartPrice: null,\n    };\n  },\n  mounted() {\n    let sumTotal = 0;\n    this.cartItems.forEach((item) => {\n      sumTotal += item.totalPrice;\n    });\n    this.totalCartPrice = Math.round((sumTotal + Number.EPSILON) * 100) / 100;\n  },\n  methods: {\n    ...mapActions([\"getProfile\", \"orderProducts\", \"setCartItems\"]),\n    submitOrder() {\n      let order = {\n        name: this.name ? this.name : this.user.name,\n        email: this.email ? this.email : this.user.email,\n        address1: this.address1 ? this.address1 : this.user.addressLine1,\n        address2: this.address2 ? this.address2 : this.user.addressLine2,\n        postalCode: this.postalCode ? this.postalCode : this.user.postalCode,\n        country: this.country ? this.country : this.user.country,\n        state: this.state ? this.state : this.user.state,\n        secondEmail: this.secondEmail,\n        creditCard: this.creditCard,\n        items: this.cartItems,\n        userId: this.user._id,\n      };\n\n      if (\n        !order.name ||\n        !order.email ||\n        !order.address1 ||\n        !order.postalCode ||\n        !order.country ||\n        !order.state ||\n        !order.creditCard ||\n        !order.items\n      ) {\n        this.danger();\n        return;\n      }\n      console.log(order);\n      this.orderProducts(order).then((res) => {\n        console.log();\n        if (res.data.success) {\n          this.$router.push(\"/post-order\");\n        }\n      });\n      this.setCartItems([]);\n      let quantityIcon = document.getElementById(\"item-quantity\");\n      quantityIcon.style =\n        \"transition: transform 0.6s ease; transform: scale(1.1); background-color: transparent\";\n    },\n    danger() {\n      this.$buefy.toast.open({\n        duration: 5000,\n        message: `Please fill out all the required fields.`,\n        type: \"is-danger\",\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.checkout {\n  padding: 20px;\n  .checkout-form {\n    background-color: whitesmoke;\n    display: flex;\n    margin-top: 20px;\n    margin: auto;\n    border: 1px solid rgb(202, 202, 202);\n    border-radius: 10px;\n\n    .profile {\n      padding: 20px;\n      width: 600px;\n      display: block;\n      margin-left: auto;\n      margin-right: auto;\n    }\n    .fields {\n      background-color: white;\n      padding: 10px;\n      border: 1px solid rgb(202, 202, 202);\n      border-radius: 10px;\n\n      .field {\n        font-weight: 500;\n      }\n    }\n\n    .address {\n      width: 600px;\n      padding: 20px;\n      display: block;\n      margin-left: auto;\n      margin-right: auto;\n    }\n    .payment {\n      padding: 20px;\n      width: 600px;\n      display: block;\n      margin-left: auto;\n      margin-right: auto;\n    }\n  }\n  .item-table {\n    margin-top: 20px;\n  }\n}\n</style>\n"]}]}